(function(e){function t(t){for(var s,i,n=t[0],c=t[1],l=t[2],u=0,d=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,i=1;i<a.length;i++){var n=a[i];0!==r[n]&&(s=!1)}s&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var s={},i={1:0},r={1:0},o=[];function n(e){return c.p+"js/"+({}[e]||e)+"."+{2:"f85af1b1",3:"9e423ff0",4:"dfe3648f",5:"9c9f3c10",6:"f8865543",7:"fc7293fd"}[e]+".js"}function c(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={2:1,3:1,4:1,5:1,6:1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var s="css/"+({}[e]||e)+"."+{2:"cdcf087f",3:"b41df093",4:"6bfcd2b2",5:"bddce515",6:"36dc4ba3",7:"31d6cfe0"}[e]+".css",r=c.p+s,o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var l=o[n],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===s||u===r))return t()}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){l=d[n],u=l.getAttribute("data-href");if(u===s||u===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var s=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete i[e],m.parentNode.removeChild(m),a(o)},m.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(m)})).then((function(){i[e]=0})));var s=r[e];if(0!==s)if(s)t.push(s[2]);else{var o=new Promise((function(t,a){s=r[e]=[t,a]}));t.push(s[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=n(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=r[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",d.name="ChunkLoadError",d.type=s,d.request=i,a[1](d)}r[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=s,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(a,s,function(t){return e[t]}.bind(null,s));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;o.push([0,0]),a()})({0:function(e,t,a){e.exports=a("2f39")},"2b33":function(e,t){function a(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e=escape(e);let a,s,i=0,r="";while(e.length>=i+3)a=(255&e.charCodeAt(i++))<<16|(255&e.charCodeAt(i++))<<8|255&e.charCodeAt(i++),r+=t.charAt((16515072&a)>>18)+t.charAt((258048&a)>>12)+t.charAt((4032&a)>>6)+t.charAt(63&a);return e.length-i>0&&e.length-i<3&&(s=Boolean(e.length-i-1),a=(255&e.charCodeAt(i++))<<16|(s?(255&e.charCodeAt(i))<<8:0),r+=t.charAt((16515072&a)>>18)+t.charAt((258048&a)>>12)+(s?t.charAt((4032&a)>>6):"=")+"="),r}function s(e){let t,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",i=0,r=null;for(;i<e.length;i+=4)t=(255&a.indexOf(e.charAt(i)))<<18|(255&a.indexOf(e.charAt(i+1)))<<12|(255&a.indexOf(e.charAt(i+2)))<<6|255&a.indexOf(e.charAt(i+3)),s+=String.fromCharCode((16711680&t)>>16,(65280&t)>>8,255&t);return r=61===e.charCodeAt(i-2)?s.substring(0,s.length-2):61===e.charCodeAt(i-1)?s.substring(0,s.length-1):s,unescape(r)}e.exports={encodeBase64:a,decodeBase64:s}},"2f39":function(e,t,a){"use strict";a.r(t);a("e6cf"),a("7d6e"),a("e54f"),a("985d"),a("31cd");var s=a("2b0e"),i=a("1f91"),r=a("42d2"),o=a("b05d");s["a"].use(o["a"],{config:{},lang:i["a"],iconSet:r["a"]});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"q-app"}},[a("router-view")],1)},c=[],l=a("ded3"),u=a.n(l),d=a("2f62"),m={methods:u()({},Object(d["b"])("store",["handleAuthStateChanged"])),mounted(){this.handleAuthStateChanged()}},h=m,g=a("2877"),p=Object(g["a"])(h,n,c,!1,null,null,null),f=p.exports;const b={pretime:0,loader:0,value:0,loadings:!0,changePre:!1,time:0,noimg:"quasar-logo.svg",opcion:"amigos",V:"V 1.36",desarrollo:0,get_sw:"",puertoNotis:"https://swnotis.herokuapp.com/",messages:{},mensajes:{},imgs:{},notis:{},otherId:0,userDetails:{},amigos:{},solicitudes:{},keys:{}};var v=b;a("ddb0");const y={loads(e,t){e.loads=t},loadings(e){e.loadings=!1},cambiarOpcion(e,t){e.opcion=t},incremental(e,t){e.time=t},changeOtherId(e,t){e.otherId=t},changeLoader(e,t){e.loader=t},changeValue(e,t,a){e.pretime=a,e.value=t},updateItemPerfil(e,t){switch(t.item){case"name":e.userDetails.name=t.name;break;case"imagen":e.userDetails.img=t.img;break;case"img_thumb":e.userDetails.img_thumb=t.img_thumb;break}},setUserDetails(e,t){e.userDetails=t,localStorage.email=t.email},keys(e,t){e.keys=t},changePre(e,t){e.changePre=t},limpiar(e){e.userDetails={},e.amigos={},e.solicitudes={},e.quiz={}},changeLimit(e,t){e.limit+=5,console.log(e.limit)},add(e,t){switch(t.item){case"tareas":s["a"].set(e.tareas,t.Id,t.details);break;case"imgs":s["a"].set(e.imgs,t.Id,t.details);break;case"amigos":s["a"].set(e.amigos,t.Id,t.details);break;case"fotos":Object.assign(e.amigos[t.Id],t.details);break;case"solicitudes":s["a"].set(e.solicitudes,t.Id,t.details);break;case"messages":s["a"].set(e.mensajes,t.Id,t.details);break;case"quiz":s["a"].set(e.quiz,t.Id,t.details);break;case"notis":s["a"].set(e.notis,t.details);break}},GetMensajes(e,t){s["a"].set(e.mensajes,t.Id,e.messages)},recuperarMensajes(e){e.messages=e.mensajes[e.otherId]},update(e,t){switch(t.item){case"tareas":Object.assign(e.tareas[t.Id],t.details);break;case"amigos":Object.assign(e.amigos[t.Id],t.details);break;case"solicitudes":Object.assign(e.solicitudes[t.Id],t.details);break;case"quiz":Object.assign(e.quiz[t.Id],t.details);break;case"notis":Object.assign(e.notis[t.Id],t.details);break}},clearFriend(e,t){e.amigos[t]={},s["a"].delete(e.amigos,t)},clearMessages(e){e.messages={}},get_sw(e,t){e.get_sw=t}};var w=y,I=(a("fb6a"),a("5319"),a("4082")),j=a.n(I),_=a("fc1b"),k=a("2b33");let A;const S={handleAuthStateChanged({commit:e,dispatch:t}){_["b"].onAuthStateChanged((a=>{a?(A=_["b"].currentUser.uid,t("Gets"),t("GetUser"),t("UpdateUser",{online:!0}),"000nax@gmail.com"==_["b"].currentUser.email&&e("Admin",1),t("preload"),this.$router.push("/users")):(e("changeValue",0,0),e("limpiar",{}),t("borrar_sw"),t("UpdateUser",{online:!1}),this.$router.replace("/Login"))}))},preload({commit:e}){e("changeValue",100,2e3),setTimeout((()=>{e("changeLoader",0)}),1500)},GetFotos({commit:e,state:t}){},async Gets({commit:e,state:t,dispatch:a}){let s="users/"+A+"/amigos";if(_["a"].collection(s).onSnapshot((a=>{a.forEach((async a=>{let s=await _["a"].collection("users/").doc(a.id).get(),i=a.data(),r=s.data();i.ultFech&&(r.hora=i.ultFech.split(" ")[0],r.fecha=i.ultFech.slice(-8));const o={img:r.img||t.noimg,name:r.name,email:r.email||"",ultChat:i.ultChat||" - Sin mensajes - ",cant_msjs:i.cant_msjs||"",hora:r.hora||"",fecha:r.fecha||"",img_thumb:r.img_thumb||t.noimg},{img:n}=o,c=j()(o,["img"]);e("add",{Id:s.id,details:c,item:"amigos"}),e("add",{Id:s.id,details:n,item:"imgs"})}))})),0==t.desarrollo){let a=_["b"].currentUser.email.split(".")[0];s=_["c"].ref("solicitudes/"+a),s.on("child_added",(async a=>{let s=await _["a"].collection("users/").doc(a.key);s.get().then((a=>{let i=a.data();if(i){let a={};a.img_thumb=i.img_thumb||t.noimg,a.name=i.name,e("add",{Id:s.id,details:a,item:"solicitudes"}),e("add",{Id:s.id,details:i.img||t.noimg,item:"imgs"})}}))})),s=_["c"].ref("chats/"+A),s.on("child_added",(t=>{_["c"].ref("chats/"+A+"/"+t.key).on("value",(t=>{let a=t.key,s=t.val();e("add",{Id:a,details:s,item:"messages"})}))}))}},async Get_sw({state:e,commit:t}){let a=await _["a"].collection("sw/").doc(localStorage.email).get();if(a.exists)t("get_sw",a.data());else{await fetch(e.puertoNotis+"/get/"+localStorage.email,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{t("get_sw",e),_["a"].collection("sw").doc(localStorage.email).set(e)}))}},async registerUser({state:e,dispatch:t},a){let s=a.email;await _["b"].createUserWithEmailAndPassword(s,a.password).then((i=>{let r=_["b"].currentUser.uid;_["a"].collection("users/").doc(r).set({name:a.name,email:s,online:!0,img_thumb:e.noimg,img:e.noimg});let o=s.split(".")[0];t("querys",{tipo:"solicitudes",email:o,friend:"HFnFNtlwr6ZrLlD0avnN0nAhWuo1"}),t("querys",{tipo:"solicitudes",email:o,friend:"TdGPSSmjzFVDYcafnq8ZJd8IPN62"}),t("querys",{tipo:"solicitudes",email:o,friend:"60teQqCd5dOD6b8wfgVBKA2en2O2"}),t("querys",{tipo:"solicitudes",email:o,friend:"sBnPKFoqjiSSIkGDk01pjHCZ3lA2"}),t("querys",{tipo:"solicitudes",email:o,friend:"kI4GG1j4mFWCO20sUiigYC3cTGK2"}),_["c"].ref("users/E3tiSF4LypQiX2B7v148h9vK0AQ2/amigos/"+r).set({null:""}),_["c"].ref("users/"+r+"/amigos/E3tiSF4LypQiX2B7v148h9vK0AQ2").set({null:""}),_["a"].collection("users/").doc(r+"/amigos/E3tiSF4LypQiX2B7v148h9vK0AQ2").set({null:""}),_["a"].collection("users/").doc("E3tiSF4LypQiX2B7v148h9vK0AQ2/amigos/"+r).set({null:""}),t("querys",{tipo:"chat",user1:"E3tiSF4LypQiX2B7v148h9vK0AQ2",user2:r,msg:{cant_msjs:1,from:"them",tipo:"text",text:"Bienvenido a mi aplicación móvil",textweb:"Bienvenido a mi aplicación móvil"}}),t("querys",{tipo:"chat",user2:"E3tiSF4LypQiX2B7v148h9vK0AQ2",user1:r,msg:{cant_msjs:1,from:"them",tipo:"text",text:"Bienvenido a mi aplicación móvil",textweb:"Bienvenido a mi aplicación móvil"}})})).catch((e=>{alert(e.message)}))},loginUser({},e){let t=e.email;_["b"].signInWithEmailAndPassword(t,e.password).catch((e=>{alert(e.message)}))},logoutUser(){_["b"].signOut()},GetUser({commit:e}){let t=_["a"].collection("users/").doc(A);t.get().then((t=>{let a=t.data();e("setUserDetails",{name:a.name,email:_["b"].currentUser.email,userId:A,img:a.img,img_thumb:a.img_thumb})})),t.update({email:_["b"].currentUser.email})},UpdateUser({},e){A&&_["a"].collection("users").doc(A).update(e)},async borrar_sw({}){window.navigator&&navigator.serviceWorker&&navigator.serviceWorker.getRegistrations().then((function(e){for(let t of e)t.unregister()})),await _["a"].collection("sw/").doc(localStorage.email).delete()},async querys({},e){switch(e.tipo){case"notificarmsg":await _["a"].collection("users/").doc(e.user1+"/amigos/"+e.user2).update(e.details);break;case"solicitudes":await _["c"].ref("solicitudes/"+e.email+"/"+e.friend).set({null:""});break;case"chat":await _["c"].ref("chats/"+e.user1+"/"+e.user2).push(e.msg);break}},changeOtherId({state:e,commit:t},a){t("changeOtherId",a),_["a"].collection("users/").doc(A+"/amigos/"+e.otherId).update({cant_msjs:0})},cambiar_foto_Perfil({commit:e,state:t},a){switch(e("updateItemPerfil",a),a.item){case"imagen":_["a"].collection("users").doc(A).update({img:a.img});break;case"img_thumb":_["a"].collection("users").doc(A).update({img_thumb:a.img_thumb});break}},cambiarNombre({commit:e,state:t},a){a.item="name",e("updateItemPerfil",a),_["a"].collection("users").doc(A).update({name:a.name})},borrarFotoPerfil({commit:e,state:t},a){var s={item:"imagen"};s.img=t.noimg,e("updateItemPerfil",s),s.item="img_thumb",s.img_thumb=t.noimg,e("updateItemPerfil",s),_["a"].collection("users").doc(A).update({img:t.noimg,img_thumb:t.noimg}),_["d"].child(a).delete()},async RecibeMessage({dispatch:e,state:t},a){let s,i,r=t.amigos[t.otherId].email;a.from="them",e("querys",{tipo:"chat",user1:t.otherId,user2:A,msg:a}),"text"==a.tipo?(i=a.text,s=Object(k["decodeBase64"])(i)):"url"==a.tipo?(i="Te ha enviado un archivo",s="Archivo"):"foto"==a.tipo?(i="Te envio una Foto",s="Foto"):"gif"==a.tipo&&(i="Te envio un gif",s="Gif"),await fetch(t.puertoNotis+"new-message/"+r,{method:"POST",body:JSON.stringify({title:t.userDetails.name,message:s,img_thumb:t.userDetails.img_thumb}),headers:{"Content-Type":"application/json"}}),e("querys",{tipo:"notificarmsg",user1:A,user2:t.otherId,details:{ultChat:s,ultFech:a.hora}}),e("querys",{tipo:"notificarmsg",user2:A,user1:t.otherId,details:{ultChat:s,cant_msjs:1,ultFech:a.hora}}),_["c"].ref("notis/"+t.otherId).update({name:t.userDetails.name,ultNoti:i,id:A})},SendMessage({dispatch:e,state:t},a){a.from="me",1==t.Admin&&(alert(a.tipo),alert(a.text)),e("querys",{tipo:"chat",user1:A,user2:t.otherId,msg:a})},subirArchivo({dispatch:e},t){_["d"].child(t.ruta).put(t.file).on("state_changed",(e=>{}),(e=>{}),(()=>{_["d"].child(t.ruta).getDownloadURL().then((a=>{e("SendMessage",{tipo:t.tipo,text:a,textweb:a,hora:t.hora}),e("RecibeMessage",{tipo:t.tipo,text:a,textweb:a,hora:t.hora})})).catch()}))},StopGettingMessages({commit:e}){}};var P=S;const O={notis:e=>e.notis,messages:e=>e.mensajes,solicitudes:e=>e.solicitudes,amigos:e=>e.amigos,user:e=>e.userDetails};var C=O,q={namespaced:!0,state:v,actions:P,mutations:w,getters:C};const x={async querys({},e){switch(e.tipo){case"delete":await _["a"].collection("users/").doc(e.user1+"/amigos/"+e.user2).delete();break;case"accept":await _["a"].collection("users/").doc(e.user1+"/amigos/"+e.user2).set(e.msg);break}},async Solicitud({state:e},t){let a=t.item,s=a+t.tipo;if(e.userDetails.email!=s){s=s.split(".")[0];var i=_["c"].ref("solicitudes/"+s+"/"+e.userDetails.userId);await i.once("value",(t=>{e.exis=t.val()})),e.exis?Push.create("Mensaje",{body:"La solicitud ya fue enviada",timeout:2500}):(i.update({estado:"enviada"}),Push.create("Tu solicitud fue enviada correctamente",{timeout:2500}))}else Push.create("No te puedes agregar a ti mismo",{timeout:2500})},Accept({dispatch:e,state:t},a){let s=a.amigo,i=_["b"].currentUser.email.split(".")[0];e("querys",{tipo:"accept",user1:t.userDetails.userId,user2:s,msg:{cant_msjs:"N",ultChat:"-",ultFech:"-"}}),e("querys",{tipo:"accept",user1:s,user2:t.userDetails.userId,msg:{cant_msjs:"N",ultChat:"-",ultFech:"-"}}),e("Borrado",{email:i,key:s,msj:"Acepto tu solicitud"}),_["c"].ref("solicitudes/"+i+"/"+s).off("value")},async Borrado({state:e,commit:t},a){_["c"].ref("solicitudes/"+a.email+"/"+a.key).remove(),await fetch("https://swnotis.herokuapp.com/new-message/"+a.email,{method:"POST",body:JSON.stringify({title:e.userDetails.name,message:a.msj,img_thumb:e.userDetails.img_thumb}),headers:{"Content-Type":"application/json"}})},RemoveSolicitud({dispatch:e},t){let a=t.amigo,s="users/"+a,i=_["b"].currentUser.email.split(".")[0];e("Borrado",{email:i,key:a,msj:"Rechazo tu solicitud"}),_["c"].ref(s).off("value")},clearMessages({commit:e,state:t}){e("clearMessages"),_["c"].ref("chats/"+t.userDetails.userId+"/"+t.otherId).remove()},clearFriend({commit:e,state:t,dispatch:a}){a("clearMessages"),a("querys",{tipo:"delete",user1:t.userDetails.userId,user2:t.otherId}),a("querys",{tipo:"delete",user2:t.userDetails.userId,user1:t.otherId}),_["c"].ref("users/"+t.otherId).off("value"),e("clearFriend",t.otherId),this.$router.push("/")}};var D=x;var U={namespaced:!0,state:v,actions:D,mutations:w};s["a"].use(d["a"]);var F=function(){const e=new d["a"].Store({modules:{store:q,store_friends:U},strict:!1});return e},B=a("8c4f");const L=[{path:"/",component:()=>Promise.all([a.e(0),a.e(4)]).then(a.bind(null,"7045")),children:[{path:"/users",component:()=>Promise.all([a.e(0),a.e(2)]).then(a.bind(null,"051b"))},{path:"/chat",component:()=>Promise.all([a.e(0),a.e(3)]).then(a.bind(null,"5b17"))},{path:"/Login",component:()=>Promise.all([a.e(0),a.e(5)]).then(a.bind(null,"013f"))},{path:"/Registro",component:()=>Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"71a4"))}]}];L.push({path:"*",component:()=>Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"e51e"))});var E=L;s["a"].use(B["a"]);var T=function(){const e=new B["a"]({scrollBehavior:()=>({x:0,y:0}),routes:E,mode:"hash",base:""});return e},M=async function(){const e="function"===typeof F?await F({Vue:s["a"]}):F,t="function"===typeof T?await T({Vue:s["a"],store:e}):T;e.$router=t;const a={router:t,store:e,render:e=>e(f),el:"#q-app"};return{app:a,store:e,router:t}},N=a("9483");Object(N["a"])("service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&a.e(0).then(a.t.bind(null,"a0db",7));async function G(){const{app:e,store:t,router:a}=await M();new s["a"](e)}G()},"31cd":function(e,t,a){},fc1b:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return l}));var s=a("2591");let i={apiKey:"AIzaSyDMpRz7qqXLS6dJCgMIyU7c3QXIkPwzQkI",authDomain:"asdf-3e590.firebaseapp.com",databaseURL:"https://asdf-3e590.firebaseio.com",projectId:"asdf-3e590",storageBucket:"asdf-3e590.appspot.com",messagingSenderId:"990553321355",appId:"1:990553321355:web:e461977aeb6c99d1bc098e",measurementId:"G-4YHRGW6XW7"};const r=s["a"].initializeApp(i),o=r.auth(),n=r.database(),c=r.storage().ref(),l=r.firestore()}});